{"id":"DEC-1367","created_at":"2025-12-22T16:29:09.592Z","type":"process","problem":"Need to choose runtime and language for Keel CLI","choice":"Bun + TypeScript","rationale":"Bun provides built-in TypeScript support, fast startup for CLI, built-in SQLite, and can compile to single binary","decided_by":{"role":"human"},"files":["package.json","tsconfig.json","src/cli.ts"],"status":"active"}
{"id":"DEC-5db6","created_at":"2025-12-22T16:29:24.481Z","type":"product","problem":"Need storage that is git-native but also queryable","choice":"Dual storage: JSONL as source of truth, SQLite as derived index","rationale":"JSONL is append-only and travels with git. SQLite enables fast indexed queries and FTS5 full-text search. Index is rebuilt from JSONL when stale.","decided_by":{"role":"human"},"files":["src/core/store.ts","src/core/db.ts",".keel/decisions.jsonl"],"status":"active"}
{"id":"DEC-4baf","created_at":"2025-12-22T16:29:43.265Z","type":"product","problem":"Sequential IDs cause collisions when multiple agents create decisions concurrently","choice":"Hash-based IDs (DEC-xxxx) like Beads uses","rationale":"Content hash + timestamp + entropy creates collision-resistant IDs. No coordination needed between agents or branches.","decided_by":{"role":"human"},"files":["src/core/id.ts"],"status":"active"}
{"id":"DEC-3957","created_at":"2025-12-22T16:30:23.871Z","type":"constraint","problem":"Decisions must never be lost or silently modified","choice":"Append-only ledger: decisions are never edited, only superseded","rationale":"Append-only preserves full history. Updates are recorded as new lines. Latest state derived at read time by merging entries with same ID.","decided_by":{"role":"human"},"files":["src/core/store.ts"],"status":"active"}
{"id":"DEC-5cba","created_at":"2025-12-22T16:39:09.589Z","type":"process","problem":"Need to track both decisions (why) and work items (what)","choice":"Use Keel for decisions and Beads for issues - they complement each other","rationale":"Keel captures rationale, constraints, and learnings. Beads captures tasks, dependencies, and status. Together they provide full project context for agents.","decided_by":{"role":"human"},"status":"active"}
{"id":"DEC-36be","created_at":"2025-12-22T16:43:56.499Z","type":"learning","problem":"Need to test Beads integration","choice":"Added --beads flag to decide command and queryByBead function","rationale":"Allows decisions to reference related Beads issues for bidirectional linking","decided_by":{"role":"human"},"files":["src/commands/decide.ts","src/core/db.ts","src/core/query.ts"],"beads":["keel-xr6"],"status":"active"}
{"id":"DEC-14b0","created_at":"2025-12-22T16:51:04.703Z","type":"learning","problem":"Need to verify decision references are still valid","choice":"Created validate command that checks file existence","rationale":"Helps catch stale references when files are renamed or deleted","decided_by":{"role":"human"},"files":["src/commands/validate.ts","src/cli.ts"],"beads":["keel-6wa"],"status":"active"}
{"id":"DEC-7543","created_at":"2025-12-22T16:56:46.500Z","type":"product","problem":"Curate needs to summarize decisions but we assumed it needs an LLM","choice":"Keel provides data and storage, the calling agent does summarization","rationale":"The agent using Keel IS an LLM. Keel just needs getCurationCandidates, markCurated, and createSummary methods.","decided_by":{"role":"human"},"files":["src/core/curate.ts"],"beads":["keel-d4c"],"status":"active"}
{"id":"DEC-5e8f","created_at":"2025-12-24T17:44:36.961Z","type":"product","problem":"Keel only works in repos with Bun/Node runtime","choice":"Convert to Go binary like Beads","rationale":"Go binary = single executable, works in Swift/Android/any repo, matches Beads architecture","decided_by":{"role":"human"},"beads":["keel-6f7"],"status":"active"}
{"id":"DEC-1c83","created_at":"2025-12-24T17:50:16.979Z","type":"product","problem":"Agents working on an epic need to see all related decisions","choice":"Added --bead flag to keel context command","rationale":"Enables querying decisions by bead ID, so an agent can get full context for an epic with a single command","decided_by":{"role":"human"},"files":["src/commands/context.ts"],"status":"active"}
{"id":"DEC-55ff","created_at":"2025-12-24T20:52:41.952Z","type":"process","problem":"How to teach agents to use Keel together with Beads without duplicating skill content","choice":"Skills are independent - Keel skill references Beads by name, Claude discovers both by context","rationale":"Claude Code skills cannot declare dependencies. Each skill teaches its own commands, cross-references the other in content. Claude discovers relevant skills based on descriptions.","decided_by":{"role":"human"},"files":["skills/keel/SKILL.md"],"beads":["keel-siy"],"status":"active"}
{"id":"DEC-3198","created_at":"2025-12-24T21:00:48.202Z","type":"product","problem":"Need single binary that works in any repo","choice":"Ported Keel from TypeScript to Go","rationale":"Go compiles to single binary, works everywhere like Beads, uses ncruces/go-sqlite3 for pure Go SQLite","decided_by":{"role":"human"},"files":["cmd/keel/main.go","internal/types/decision.go","internal/store/store.go","internal/index/sqlite.go","internal/query/query.go"],"beads":["keel-6f7"],"status":"active"}
{"id":"DEC-2b5b","created_at":"2025-12-24T21:19:23.427705Z","type":"process","problem":"Should agents be able to initialize Keel in new repos?","choice":"No - keel init must be run by humans, not agents","rationale":"Creating decision infrastructure is a deliberate project setup decision. Matches Beads pattern where bd init is human-only.","decided_by":{"role":"human"},"files":["cmd/keel/init.go","internal/store/init.go"],"status":"active"}
{"id":"DEC-7ea7","created_at":"2025-12-25T18:47:38.829Z","type":"process","problem":"Skills need to be in .claude/skills/ for Claude Code discovery but we want them version controlled in the repo","choice":"Symlink .claude/skills/keel -> ../../skills/keel to keep source in repo while enabling discovery","rationale":"Source stays in skills/ for version control, symlink in .claude/skills/ for Claude Code auto-discovery","decided_by":{"role":"agent"},"files":["skills/keel/SKILL.md",".claude/skills/keel"],"status":"active"}
