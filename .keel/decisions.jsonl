{"id":"DEC-1367","created_at":"2025-12-22T16:29:09.592Z","type":"process","problem":"Need to choose runtime and language for Keel CLI","choice":"Bun + TypeScript","rationale":"Bun provides built-in TypeScript support, fast startup for CLI, built-in SQLite, and can compile to single binary","decided_by":{"role":"human"},"files":["package.json","tsconfig.json","src/cli.ts"],"status":"active"}
{"id":"DEC-5db6","created_at":"2025-12-22T16:29:24.481Z","type":"product","problem":"Need storage that is git-native but also queryable","choice":"Dual storage: JSONL as source of truth, SQLite as derived index","rationale":"JSONL is append-only and travels with git. SQLite enables fast indexed queries and FTS5 full-text search. Index is rebuilt from JSONL when stale.","decided_by":{"role":"human"},"files":["src/core/store.ts","src/core/db.ts",".keel/decisions.jsonl"],"status":"active"}
{"id":"DEC-4baf","created_at":"2025-12-22T16:29:43.265Z","type":"product","problem":"Sequential IDs cause collisions when multiple agents create decisions concurrently","choice":"Hash-based IDs (DEC-xxxx) like Beads uses","rationale":"Content hash + timestamp + entropy creates collision-resistant IDs. No coordination needed between agents or branches.","decided_by":{"role":"human"},"files":["src/core/id.ts"],"status":"active"}
{"id":"DEC-3957","created_at":"2025-12-22T16:30:23.871Z","type":"constraint","problem":"Decisions must never be lost or silently modified","choice":"Append-only ledger: decisions are never edited, only superseded","rationale":"Append-only preserves full history. Updates are recorded as new lines. Latest state derived at read time by merging entries with same ID.","decided_by":{"role":"human"},"files":["src/core/store.ts"],"status":"active"}
{"id":"DEC-5cba","created_at":"2025-12-22T16:39:09.589Z","type":"process","problem":"Need to track both decisions (why) and work items (what)","choice":"Use Keel for decisions and Beads for issues - they complement each other","rationale":"Keel captures rationale, constraints, and learnings. Beads captures tasks, dependencies, and status. Together they provide full project context for agents.","decided_by":{"role":"human"},"status":"active"}
{"id":"DEC-36be","created_at":"2025-12-22T16:43:56.499Z","type":"learning","problem":"Need to test Beads integration","choice":"Added --beads flag to decide command and queryByBead function","rationale":"Allows decisions to reference related Beads issues for bidirectional linking","decided_by":{"role":"human"},"files":["src/commands/decide.ts","src/core/db.ts","src/core/query.ts"],"beads":["keel-xr6"],"status":"active"}
{"id":"DEC-14b0","created_at":"2025-12-22T16:51:04.703Z","type":"learning","problem":"Need to verify decision references are still valid","choice":"Created validate command that checks file existence","rationale":"Helps catch stale references when files are renamed or deleted","decided_by":{"role":"human"},"files":["src/commands/validate.ts","src/cli.ts"],"beads":["keel-6wa"],"status":"active"}
